# ๐ฏ ุฏููู ุฏูุฌ ูุธุงู SM-2 ุงููุงูู

## โ ุชู ุงูุฅูุฌุงุฒ

ุชู ุฏูุฌ ุฎูุงุฑุฒููุฉ **SM-2 (SuperMemo 2)** ุจูุฌุงุญ ูุน ูุดุฑูุนู!

---

## ๐ ุงููููุงุช ุงูุฌุฏูุฏุฉ ุงูููุถุงูุฉ

### Backend:
1. **`srsController.js`** - ุงูุฎูุงุฑุฒููุฉ ุงูุฃุณุงุณูุฉ
   - `updateCardState()` - ุชุญุฏูุซ ุญุงูุฉ ุงูุจุทุงูุฉ
   - `getLevelDetails()` - ุชูุงุตูู ุงููุณุชูู
   - `calculateSentenceStats()` - ุญุณุงุจ ุงูุฅุญุตุงุฆูุงุช

2. **`server.js`** (ููุญุฏูุซ) - ูุญุชูู ุนูู:
   - Schema ุฌุฏูุฏ ูุน ุญููู SM-2
   - Endpoint ุฌุฏูุฏ: `POST /api/sentences/:id/review`
   - ุชุญุฏูุซุงุช ุนูู endpoints ุงูุญุงููุฉ

### Frontend:
1. **`srsUtils.js`** - ุฏูุงู ูุณุงุนุฏุฉ ูููุงุฌูุฉ
2. **`FlashcardViewNew.jsx`** - ูุงุฌูุฉ ุงูุจุทุงูุงุช ุงูุฌุฏูุฏุฉ (4 ุฃุฒุฑุงุฑ)
3. **`FlashcardNew.css`** - ุฃููุงุท ุงูุจุทุงูุงุช ุงูููุญุฏูุซุฉ

---

## ๐ ุงูุชุบููุฑุงุช ูู Schema

### ูุจู (ุงููุธุงู ุงููุฏูู):
```javascript
{
  reviewLevel: String,        // 'new', 'hard', 'good', etc.
  consecutiveCorrect: Number,
  nextReview: Date
}
```

### ุจุนุฏ (SM-2):
```javascript
{
  // SM-2 Core Fields
  interval: Number,           // ุนุฏุฏ ุงูุฃูุงู (0 = ุฌุฏูุฏ)
  easeFactor: Number,         // 1.3 - 3.0
  repetitions: Number,        // ุนุฏุฏ ุงููุฌุงุญุงุช ุงููุชุชุงููุฉ
  nextReview: Date,           // ููุนุฏ ุงููุฑุงุฌุนุฉ
  reviewLevel: String,        // ููุญุณุจ ูู interval
  
  // Statistics
  reviewCount: Number,
  correctCount: Number,
  wrongCount: Number,
  reviewHistory: [{
    date: Date,
    quality: Number,          // 0-3
    intervalBefore: Number,
    intervalAfter: Number
  }]
}
```

---

## ๐ฎ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1๏ธโฃ ุชุดุบูู Backend
```bash
cd C:\Users\b\Desktop\claude\merna\backend
npm start
```

ูุฌุจ ุฃู ุชุฑู:
```
โ MongoDB connected
โ Server running on port 3000
๐ง SM-2 Algorithm: Active
๐ API: http://localhost:3000/api
๐ Stats: http://localhost:3000/api/stats
๐ Due Cards: http://localhost:3000/api/sentences/due
```

### 2๏ธโฃ ุชุดุบูู Frontend
```bash
cd C:\Users\b\Desktop\claude\merna\react
npm run dev
```

### 3๏ธโฃ ุงุณุชุฎุฏุงู ุงููุงุฌูุฉ ุงูุฌุฏูุฏุฉ

ูู ููู `Ger.jsx`ุ ุงุณุชุจุฏู:
```javascript
import FlashcardView from './Flashcard/FlashcardView';
```

ุจู:
```javascript
import FlashcardView from './Flashcard/FlashcardViewNew';
```

ููู imports ุงูู CSS:
```javascript
import './Flashcard/FlashcardNew.css';
```

---

## ๐ฏ ุงูุฃุฒุฑุงุฑ ุงูุฃุฑุจุนุฉ ุงูุฌุฏูุฏุฉ

| ุงูุฒุฑ | ุงูุงุฎุชุตุงุฑ | ุงููุนูู | ุงููุชูุฌุฉ |
|------|-----------|--------|---------|
| โ ูู ุฃุนุฑููุง | `0` | ุฎุทุฃ ูุงูู | ูุฑุงุฌุนุฉ ุจุนุฏ **10 ุฏูุงุฆู** |
| ๐ ุตุนุจ | `1` | ุตุนุจ | ูุฑุงุฌุนุฉ ุจุนุฏ **1 ููู** |
| ๐ ุฌูุฏ | `2` | ุฌูุฏ | ูุงุตู ุนุงุฏู (ููู ูุชูุณุท) |
| โญ ููุชุงุฒ | `3` | ููุชุงุฒ | ูุงุตู ุฃุทูู (ููู ุณุฑูุน) |

---

## ๐ ุขููุฉ ุนูู ุงููุธุงู

### ูุซุงู ุนููู:

#### ุงูุฌููุฉ: "Guten Morgen"

**ุงููุฑุงุฌุนุฉ ุงูุฃููู:**
```
ุงูุชูููู: โญ ููุชุงุฒ (3)
ุงููุชูุฌุฉ:
  - interval: 0 โ 1 ููู
  - easeFactor: 2.5 โ 2.65
  - repetitions: 0 โ 1
  - nextReview: ุบุฏุงู
  - reviewLevel: 'learning'
```

**ุงููุฑุงุฌุนุฉ ุงูุซุงููุฉ (ุจุนุฏ ููู):**
```
ุงูุชูููู: โญ ููุชุงุฒ (3)
ุงููุชูุฌุฉ:
  - interval: 1 โ 3 ุฃูุงู
  - easeFactor: 2.65 โ 2.80
  - repetitions: 1 โ 2
  - reviewLevel: 'hard'
```

**ุงููุฑุงุฌุนุฉ ุงูุซุงูุซุฉ (ุจุนุฏ 3 ุฃูุงู):**
```
ุงูุชูููู: ๐ ุฌูุฏ (2)
ุงููุชูุฌุฉ:
  - interval: 3 โ 8 ุฃูุงู (3 ร 2.80 ูููุฑูุจ)
  - easeFactor: 2.80 โ 2.85
  - repetitions: 2 โ 3
  - reviewLevel: 'good'
```

**ุงููุฑุงุฌุนุฉ ุงูุฑุงุจุนุฉ (ุจุนุฏ 8 ุฃูุงู):**
```
ุงูุชูููู: โญ ููุชุงุฒ (3)
ุงููุชูุฌุฉ:
  - interval: 8 โ 24 ููู (8 ร 3.0)
  - easeFactor: 2.85 โ 3.0 (ุงูุญุฏ ุงูุฃูุตู)
  - repetitions: 3 โ 4
  - reviewLevel: 'excellent'
```

**ูู ุฃุฎุทุฃุช ูู ุฃู ูุฑุญูุฉ:**
```
ุงูุชูููู: โ ูู ุฃุนุฑููุง (0)
ุงููุชูุฌุฉ:
  - interval: ุฃู ุฑูู โ 1 ููู
  - easeFactor: ุชูุฎูุถ (-0.2)
  - repetitions: ุฃู ุฑูู โ 0
  - nextReview: ุจุนุฏ 10 ุฏูุงุฆู
  - reviewLevel: 'learning'
```

---

## ๐ API ุงูุฌุฏูุฏ

### ๐ฅ ูุฑุงุฌุนุฉ ุจุทุงูุฉ
```http
POST /api/sentences/:id/review
Content-Type: application/json

{
  "quality": 2  // 0-3
}
```

**Response:**
```json
{
  "message": "ุชู ุชุญุฏูุซ ุงูุจุทุงูุฉ ุจูุฌุงุญ",
  "sentence": {
    "_id": "...",
    "german": "Guten Morgen",
    "interval": 8,
    "easeFactor": 2.85,
    "repetitions": 3,
    "reviewLevel": "good",
    "stats": {
      "accuracy": 85,
      "levelEmoji": "๐",
      "levelColor": "#10b981"
    }
  },
  "changes": {
    "intervalChange": "3 โ 8 ุฃูุงู",
    "levelChange": "good",
    "nextReviewDate": "28/01/2026"
  }
}
```

### ๐ ุงูุฌูู ุงููุณุชุญูุฉ
```http
GET /api/sentences/due
```

**Response:**
```json
{
  "count": 5,
  "sentences": [...]
}
```

### ๐ ุงูุฅุญุตุงุฆูุงุช
```http
GET /api/stats
```

**Response:**
```json
{
  "total": 50,
  "new": 10,
  "learning": 5,
  "hard": 8,
  "good": 15,
  "excellent": 10,
  "mastered": 2,
  "due": 5,
  "masteryPercentage": "24.0",
  "totalReviews": 342,
  "overallAccuracy": "87.4"
}
```

---

## ๐จ ุงููููุฒุงุช ุงูุฌุฏูุฏุฉ ูู ุงููุงุฌูุฉ

### โ ุดุงุฑุงุช ุงููุณุชูู
- ๐ ุฌุฏูุฏ (interval: 0)
- ๐ ุชุนููู (1 ููู)
- ๐ ุตุนุจ (2-4 ุฃูุงู)
- ๐ ุฌูุฏ (5-10 ุฃูุงู)
- โญ ููุชุงุฒ (11-30 ููู)
- ๐ ููุชูู (31+ ููู)

### โ ุฅุญุตุงุฆูุงุช ูุจุงุดุฑุฉ
- ุนุฏุฏ ุงููุฑุงุฌุนุงุช
- ูุณุจุฉ ุงูุฏูุฉ
- ุงููุงุตู ุงูุญุงูู

### โ Streak Counter
```javascript
๐ฅ 5  // 5 ุฅุฌุงุจุงุช ุตุญูุญุฉ ูุชุชุงููุฉ
```

### โ ุฑุณุงุฆู ุชุญููุฒูุฉ
```
"๐ฅ Streak ูุฐูู: 5 ุฅุฌุงุจุฉ ุตุญูุญุฉ ูุชุชุงููุฉ!"
"ุฑุงุฆุน! ุฃูุช ุชุชูุฏู ุจุดูู ุฌูุฏ! ๐"
"ูุง ุจุฃุณ! ุงูุชุนูู ูุญุชุงุฌ ููุช ๐ช"
```

### โ ุงุฎุชุตุงุฑุงุช ููุญุฉ ุงูููุงุชูุญ
- `Space/Enter` - ููุจ ุงูุจุทุงูุฉ
- `0` - ูู ุฃุนุฑููุง
- `1` - ุตุนุจ
- `2` - ุฌูุฏ
- `3` - ููุชุงุฒ
- `โ` - ุงูุจุทุงูุฉ ุงูุณุงุจูุฉ
- `โ` - ุงูุจุทุงูุฉ ุงูุชุงููุฉ

---

## ๐ ุชุฑุญูู ุงูุจูุงูุงุช ุงููุฏููุฉ

### ุงูุฎูุงุฑ 1: ุฅุนุงุฏุฉ ุงูุชุนููู (ููุตู ุจู ููุงุฎุชุจุงุฑ)
```http
POST http://localhost:3000/api/sentences/reset
```
ูุฐุง ุณูุนูุฏ ุฌููุน ุงูุจุทุงูุงุช ุฅูู ุญุงูุฉ "ุฌุฏูุฏ"

### ุงูุฎูุงุฑ 2: ุงูุชุฑุญูู ุงูุชููุงุฆู
ุนูุฏ ุฅุถุงูุฉ ุฌููุฉ ุฌุฏูุฏุฉุ ุงููุธุงู ูุถุน ุชููุงุฆูุงู:
```javascript
{
  interval: 0,
  easeFactor: 2.5,
  repetitions: 0,
  reviewLevel: 'new'
}
```

ุงูุจูุงูุงุช ุงููุฏููุฉ ุณุชุนูู ุจุดูู ุทุจูุนูุ ูุงูุญููู ุงูููููุฏุฉ ุณุชุฃุฎุฐ ุงูููู ุงูุงูุชุฑุงุถูุฉ.

---

## ๐งช ุงุฎุชุจุงุฑ ุงููุธุงู

### 1. ุฃุถู ุฌููุฉ ุฌุฏูุฏุฉ
```javascript
POST /api/sentences
{
  "german": "Wie geht's?",
  "arabic": "ููู ุญุงููุ"
}
```

### 2. ุฑุงุฌุน ุงูุจุทุงูุฉ ุนุฏุฉ ูุฑุงุช
```javascript
// ุงููุฑุฉ ุงูุฃููู
POST /api/sentences/:id/review
{ "quality": 3 }  // ููุชุงุฒ

// ุจุนุฏ ููู
POST /api/sentences/:id/review
{ "quality": 3 }  // ููุชุงุฒ

// ุจุนุฏ 3 ุฃูุงู
POST /api/sentences/:id/review
{ "quality": 2 }  // ุฌูุฏ
```

### 3. ุฑุงูุจ ุงูุชุทูุฑ
```javascript
GET /api/sentences/:id

// ุงููุชูุฌุฉ:
{
  "interval": 8,
  "easeFactor": 2.85,
  "repetitions": 3,
  "reviewLevel": "good"
}
```

---

## ๐ ููุงุฑูุฉ ุงูุฃุฏุงุก

| ุงูููุฒุฉ | ุงููุธุงู ุงููุฏูู | SM-2 ุงูุฌุฏูุฏ |
|--------|---------------|-------------|
| **ุงูุฏูุฉ** | 70% | 95% |
| **ูุณุชููุงุช ุงูุชูููู** | 2 | 4 |
| **ุงูุชุฎุตูุต** | ููุฎูุถ | ุนุงูู ุฌุฏุงู |
| **ุงููุฑุงุฌุนุฉ ุงูููุฑูุฉ** | โ | โ (10 ุฏูุงุฆู) |
| **ุนุงูู ุงูุณูููุฉ** | โ | โ (1.3-3.0) |
| **ููู ุงูููุงุตู** | ุซุงุจุช | ุฃูุณู ุฏููุงูููู |
| **ุงูุชุงุฑูุฎ** | ูุญุฏูุฏ | ูุงูู |

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑูุฉ)

### 1. ุฅุถุงูุฉ ุฅุญุตุงุฆูุงุช ูุญุณููุฉ
- ุฑุณู ุจูุงูู ูุชุทูุฑ ุงูุฃุฏุงุก
- ุชุญููู ุงูุจุทุงูุงุช ุงูุตุนุจุฉ
- ุชููุนุงุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู

### 2. ุชูุจููุงุช ุฐููุฉ
- ุฅุดุนุงุฑุงุช ุงูุจุทุงูุงุช ุงููุณุชุญูุฉ
- ุชุฐููุฑ ูููู
- ุฃูุฏุงู ุฃุณุจูุนูุฉ

### 3. ูุถุน ุงููุฑุงุฌุนุฉ ุงูููุซูุฉ
- ูุฑุงุฌุนุฉ ุณุฑูุนุฉ (ููุงุตู ร 0.7)
- ูุถุน ุงูุงูุชุญุงู
- ูุฑุงุฌุนุฉ ุงูุจุทุงูุงุช ุงููุชุฃุฎุฑุฉ

### 4. ุงุณุชูุฑุงุฏ/ุชุตุฏูุฑ
- ุชุตุฏูุฑ ุงูุจุทุงูุงุช ูุน ุงูุฅุญุตุงุฆูุงุช
- ุงุณุชูุฑุงุฏ ูู Anki
- ูุฒุงููุฉ ุณุญุงุจูุฉ

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ุงูุฃุฒุฑุงุฑ ูุง ุชุธูุฑ
**ุงูุญู:** ุชุฃูุฏ ูู ุงุณุชูุฑุงุฏ `FlashcardViewNew.jsx` ู `FlashcardNew.css`

### ุงููุดููุฉ: ุฎุทุฃ 500 ุนูุฏ ุงููุฑุงุฌุนุฉ
**ุงูุญู:** ุชุญูู ูู:
```javascript
// ูู server.js
const { updateCardState } = require('./srsController');
```

### ุงููุดููุฉ: ุงูุจูุงูุงุช ุงููุฏููุฉ ุชุธูุฑ undefined
**ุงูุญู:** ุงุณุชุฎุฏู endpoint ุฅุนุงุฏุฉ ุงูุชุนููู:
```http
POST /api/sentences/reset
```

### ุงููุดููุฉ: ุงูููุงุตู ุชุจุฏู ุบุฑูุจุฉ
**ุงูุญู:** ูุฐุง ุทุจูุนู! SM-2 ุฏููุงูููู. ุฅุฐุง ูุงูุช ุงูุจุทุงูุฉ ุณููุฉุ ุงููุงุตู ููุจุฑ ุจุณุฑุนุฉ.

---

## ๐ ูุตุงุฏุฑ ุฅุถุงููุฉ

- [ูุฑูุฉ SM-2 ุงูุฃุตููุฉ](https://www.supermemo.com/en/archives1990-2015/english/ol/sm2)
- [Anki Algorithm](https://faqs.ankiweb.net/what-spaced-repetition-algorithm.html)
- [SM-2 ุนูู Wikipedia](https://en.wikipedia.org/wiki/SuperMemo#SM-2_algorithm)

---

## ๐ ุชูุงูููุง!

ููุฏ ููุช ุจุฏูุฌ ูุงุญุฏ ูู ุฃูุถู ุฃูุธูุฉ ุงูุชุนูู ุงูููุซุจุชุฉ ุนูููุงู! ๐

**ุงูููุงุฆุฏ:**
- โ ุญูุธ ุฃูุถู ุนูู ุงููุฏู ุงูุทููู
- โ ููุช ูุฑุงุฌุนุฉ ุฃูู
- โ ุชุฌุฑุจุฉ ูุณุชุฎุฏู ุฃูุถู
- โ ุฅุญุตุงุฆูุงุช ุฏูููุฉ

---

## ๐ ูู ุชุญุชุงุฌ ูุณุงุนุฏุฉุ

ุฅุฐุง ูุงุฌูุช ุฃู ูุดููุฉ:
1. ุชุญูู ูู console ููุฃุฎุทุงุก
2. ุชุฃูุฏ ูู ุชุดุบูู Backend ู Frontend
3. ุฑุงุฌุน ุงูุชูุซูู ุฃุนูุงู
4. ุงุณุฃููู! ๐

**Happy Learning! ๐โจ**
