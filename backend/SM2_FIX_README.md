# ğŸ¯ Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© SM-2 ÙÙŠ Ù†Ø¸Ø§Ù… Flashcard

## ğŸ“‹ Ù…Ù„Ø®Øµ Ø§Ù„Ù…Ø´ÙƒÙ„Ø©

**Ø§Ù„Ù…Ø´ÙƒÙ„Ø© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©:**
Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ AgainØŒ HardØŒ GoodØŒ Ø£Ùˆ ExcellentØŒ ÙƒØ§Ù† Modal ÙŠØ¹Ø±Ø¶ **Ù†ÙØ³ Ø§Ù„ÙØ§ØµÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠ** Ù„Ù€ Again Ùˆ ExcellentØŒ ÙˆÙ‡Ø°Ø§ Ø®Ø§Ø·Ø¦.

**Ø§Ù„Ø³Ø¨Ø¨:**
Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ù‚Ø¯ÙŠÙ… ÙÙŠ `srsController.js` ÙƒØ§Ù† ÙŠØ¬Ù…Ø¹ quality 0 Ùˆ 1 ÙÙŠ Ù†ÙØ³ Ø§Ù„Ù€ block:
```javascript
if (quality === 0 || quality === 1) {
  // Ù†ÙØ³ Ø§Ù„Ù…Ù†Ø·Ù‚ Ù„Ù„Ø§Ø«Ù†ÙŠÙ†!
}
```

---

## âœ… Ø§Ù„Ø­Ù„ Ø§Ù„Ù…Ø·Ø¨Ù‚

### 1. ØªØ¹Ø¯ÙŠÙ„ `srsController.js`

ØªÙ… ÙØµÙ„ ÙƒÙ„ quality Ø¥Ù„Ù‰ Ø­Ø§Ù„Ø© Ù…Ø³ØªÙ‚Ù„Ø©:

```javascript
// Quality 0: Again â†’ 10 Ø¯Ù‚Ø§Ø¦Ù‚
if (quality === 0) {
  newInterval = 0;
  newEase -= 0.2;
  nextReview = addMinutes(now, 10);
}

// Quality 1: Hard â†’ 1 ÙŠÙˆÙ…
else if (quality === 1) {
  newInterval = 1;
  newEase -= 0.15;
  nextReview = addDays(now, 1);
}

// Quality 2: Good â†’ SM-2 Ø¹Ø§Ø¯ÙŠ
else if (quality === 2) {
  if (reps === 0) newInterval = 1;
  else if (reps === 1) newInterval = 3;
  else newInterval = interval * ease;
}

// Quality 3: Excellent â†’ ÙÙˆØ§ØµÙ„ Ø·ÙˆÙŠÙ„Ø© Ã— 1.5
else if (quality === 3) {
  if (reps === 0) newInterval = 3;
  else if (reps === 1) newInterval = 7;
  else newInterval = interval * ease * 1.5;
  newEase += 0.15;
}
```

---

## ğŸ“Š Ø¬Ø¯ÙˆÙ„ Ø§Ù„ÙÙˆØ§ØµÙ„ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©

| Ø§Ù„Ø²Ø± | Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© 1 | Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© 2 | Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø© 3 | Ù…Ø¹Ø§Ù…Ù„ Ø§Ù„Ø³Ù‡ÙˆÙ„Ø© |
|------|-----------|-----------|-----------|---------------|
| âŒ Again | 10 Ø¯Ù‚Ø§Ø¦Ù‚ | 10 Ø¯Ù‚Ø§Ø¦Ù‚ | 10 Ø¯Ù‚Ø§Ø¦Ù‚ | -0.2 |
| ğŸ˜… Hard | 1 ÙŠÙˆÙ… | 1 ÙŠÙˆÙ… | 1 ÙŠÙˆÙ… | -0.15 |
| ğŸ‘ Good | 1 ÙŠÙˆÙ… | 3 Ø£ÙŠØ§Ù… | 8 Ø£ÙŠØ§Ù… | Ù„Ø§ ØªØºÙŠÙŠØ± |
| â­ Excellent | 3 Ø£ÙŠØ§Ù… | 7 Ø£ÙŠØ§Ù… | 29 ÙŠÙˆÙ… | +0.15 |

---

## ğŸ”§ Ø§Ù„Ù…Ù„ÙØ§Øª Ø§Ù„Ù…Ø¹Ø¯Ù‘Ù„Ø©

### Backend
1. âœ… `backend/srsController.js` - **ØªÙ… Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„**
2. âœ… `backend/controllers/sentenceController.js` - **Ù„Ø§ ÙŠØ­ØªØ§Ø¬ ØªØ¹Ø¯ÙŠÙ„**

### Frontend
1. âœ… `react/src/components/GermanLearningApp/Flashcard/FlashcardViewNew.jsx` - **ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­**
2. âœ… `react/src/components/GermanLearningApp/Flashcard/ReviewResultModal.jsx` - **ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­**

---

## ğŸ§ª ÙƒÙŠÙÙŠØ© Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±

### Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 1: Automated Test
```bash
cd backend
node test-sm2-fixed.js
```

**Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù…ØªÙˆÙ‚Ø¹Ø©:**
```
âœ… PASS: Again ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
âœ… PASS: Hard ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
âœ… PASS: Good progression ØµØ­ÙŠØ­Ø©
âœ… PASS: Excellent progression ØµØ­ÙŠØ­Ø©
âœ… PASS: Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙÙˆØ§ØµÙ„ Ù…Ø®ØªÙ„ÙØ© Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­
```

### Ø§Ù„Ø·Ø±ÙŠÙ‚Ø© 2: Manual Test ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚

1. **Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø®Ø§Ø¯Ù…:**
   ```bash
   cd backend
   npm start
   ```

2. **Ø§Ø¨Ø¯Ø£ Frontend:**
   ```bash
   cd react
   npm run dev
   ```

3. **Ø§Ø®ØªØ¨Ø± Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª:**
   - Ø§ÙØªØ­ ÙˆØ¶Ø¹ Flashcard
   - Ø§Ø®ØªØ± Ø¨Ø·Ø§Ù‚Ø©
   - Ø§Ù‚Ù„Ø¨Ù‡Ø§ Ù„Ø¹Ø±Ø¶ Ø§Ù„ØªØ±Ø¬Ù…Ø©
   - Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ ÙƒÙ„ Ø²Ø± ÙˆÙ„Ø§Ø­Ø¸:
     - **Again**: Modal ÙŠØ¹Ø±Ø¶ "10 Ø¯Ù‚Ø§Ø¦Ù‚"
     - **Hard**: Modal ÙŠØ¹Ø±Ø¶ "1 ÙŠÙˆÙ…"
     - **Good**: Modal ÙŠØ¹Ø±Ø¶ "1 ÙŠÙˆÙ…" Ø«Ù… "3 Ø£ÙŠØ§Ù…" Ø«Ù… "8 Ø£ÙŠØ§Ù…"
     - **Excellent**: Modal ÙŠØ¹Ø±Ø¶ "3 Ø£ÙŠØ§Ù…" Ø«Ù… "7 Ø£ÙŠØ§Ù…" Ø«Ù… "29 ÙŠÙˆÙ…"

---

## ğŸ“ Ù‡ÙŠÙƒÙ„ Ø§Ù„Ù…Ù„ÙØ§Øª

```
merna/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ constants.js          # Ø«ÙˆØ§Ø¨Øª SM-2
â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â””â”€â”€ sentenceController.js # API endpoints
â”‚   â”œâ”€â”€ srsController.js          # âœ¨ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø­Ø³Ù‘Ù†
â”‚   â””â”€â”€ test-sm2-fixed.js         # ğŸ§ª Ù…Ù„Ù Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø±
â”‚
â””â”€â”€ react/
    â””â”€â”€ src/
        â””â”€â”€ components/
            â””â”€â”€ GermanLearningApp/
                â””â”€â”€ Flashcard/
                    â”œâ”€â”€ FlashcardViewNew.jsx    # ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª
                    â””â”€â”€ ReviewResultModal.jsx   # Modal Ø§Ù„Ù†ØªØ§Ø¦Ø¬
```

---

## ğŸ¯ Ø§Ù„Ù†Ù‚Ø§Ø· Ø§Ù„Ù…Ù‡Ù…Ø©

### 1. Ø§Ù„ÙØµÙ„ Ø§Ù„ÙƒØ§Ù…Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø­Ø§Ù„Ø§Øª
ÙƒÙ„ quality Ù„Ù‡ Ù…Ù†Ø·Ù‚ Ù…Ø³ØªÙ‚Ù„ ØªÙ…Ø§Ù…Ø§Ù‹ØŒ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£ÙŠ Ø­Ø§Ù„Ø§Øª Ù…Ø´ØªØ±ÙƒØ©.

### 2. Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ø³Ù‡ÙˆÙ„Ø© (Ease Factor)
- **Again**: ÙŠÙ†Ù‚Øµ Ø¨Ù€ 0.2 (Ø¹Ù‚ÙˆØ¨Ø© ÙƒØ¨ÙŠØ±Ø©)
- **Hard**: ÙŠÙ†Ù‚Øµ Ø¨Ù€ 0.15 (Ø¹Ù‚ÙˆØ¨Ø© Ù…ØªÙˆØ³Ø·Ø©)
- **Good**: Ù„Ø§ ÙŠØªØºÙŠØ± (Ù…Ø­Ø§ÙŠØ¯)
- **Excellent**: ÙŠØ²ÙŠØ¯ Ø¨Ù€ 0.15 (Ù…ÙƒØ§ÙØ£Ø©)

### 3. Ø§Ù„ÙÙˆØ§ØµÙ„ Ø§Ù„Ø²Ù…Ù†ÙŠØ©
- **Again**: Ø¯Ø§Ø¦Ù…Ø§Ù‹ 0 (= 10 Ø¯Ù‚Ø§Ø¦Ù‚)
- **Hard**: Ø¯Ø§Ø¦Ù…Ø§Ù‹ 1 ÙŠÙˆÙ…
- **Good**: ØªØµØ§Ø¹Ø¯ Ø·Ø¨ÙŠØ¹ÙŠ (1â†’3â†’intervalÃ—ease)
- **Excellent**: ØªØµØ§Ø¹Ø¯ Ø³Ø±ÙŠØ¹ (3â†’7â†’intervalÃ—easeÃ—1.5)

### 4. Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª (Repetitions)
- **Again & Hard**: ÙŠØµÙØ±ÙˆÙ† Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª (Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¨Ø¯Ø¡)
- **Good & Excellent**: ÙŠØ²ÙŠØ¯ÙˆÙ† Ø§Ù„ØªÙƒØ±Ø§Ø±Ø§Øª (ØªÙ‚Ø¯Ù…)

---

## ğŸ› Ø­Ù„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ Ø§Ù„Ø´Ø§Ø¦Ø¹Ø©

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Modal ÙŠØ¹Ø±Ø¶ Ù†ÙØ³ Ø§Ù„ÙØ§ØµÙ„ Ù„Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£Ø²Ø±Ø§Ø±

**Ø§Ù„Ø­Ù„:**
1. ØªØ£ÙƒØ¯ Ù…Ù† ØªØ­Ø¯ÙŠØ« `srsController.js`
2. Ø£Ø¹Ø¯ ØªØ´ØºÙŠÙ„ Backend: `npm start`
3. Ø§Ù…Ø³Ø­ cache Ø§Ù„Ù…ØªØµÙØ­: `Ctrl+Shift+Delete`
4. Ø£Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©: `Ctrl+F5`

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ø§Ù„ÙÙˆØ§ØµÙ„ Ù„Ø§ ØªØ²ÙŠØ¯ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­

**Ø§Ù„Ø­Ù„:**
ØªØ­Ù‚Ù‚ Ù…Ù† `constants.js`:
```javascript
SM2: {
  MIN_INTERVAL_DAYS: 1,    // ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 1
  MAX_INTERVAL_DAYS: 365,  // ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† 365
  MIN_EASE_FACTOR: 1.3,
  MAX_EASE_FACTOR: 3.0
}
```

### Ø§Ù„Ù…Ø´ÙƒÙ„Ø©: Ø®Ø·Ø£ ÙÙŠ ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„ØªØ§Ø±ÙŠØ®

**Ø§Ù„Ø­Ù„:**
ØªØ­Ù‚Ù‚ Ù…Ù† `sentenceController.js` - Ø§Ù„Ø³Ø·Ø± 80-90:
```javascript
const formatInterval = (interval) => {
  if (interval === 0 || interval < 0.01) {
    return { value: 10, unit: 'minutes' };
  }
  // ...
};
```

---

## ğŸ“š Ù…ØµØ§Ø¯Ø± Ø¥Ø¶Ø§ÙÙŠØ©

- [SM-2 Algorithm Ø§Ù„Ø£ØµÙ„ÙŠ](https://www.supermemo.com/en/archives1990-2015/english/ol/sm2)
- [Anki Documentation](https://docs.ankiweb.net/)
- [Spaced Repetition Ø¹Ù„Ù‰ Wikipedia](https://en.wikipedia.org/wiki/Spaced_repetition)

---

## âœ¨ Ø§Ù„Ø®Ù„Ø§ØµØ©

### Ù‚Ø¨Ù„ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ âŒ
- Again Ùˆ Hard â†’ Ù†ÙØ³ Ø§Ù„ÙØ§ØµÙ„ ØªÙ‚Ø±ÙŠØ¨Ø§Ù‹
- Good Ùˆ Excellent â†’ ØºÙŠØ± ÙˆØ§Ø¶Ø­ Ø§Ù„ÙØ±Ù‚
- Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø­ØªØ§Ø± Ø£ÙŠ Ø²Ø± ÙŠØ®ØªØ§Ø±

### Ø¨Ø¹Ø¯ Ø§Ù„ØªØ¹Ø¯ÙŠÙ„ âœ…
- **Again**: 10 Ø¯Ù‚Ø§Ø¦Ù‚ (Ù…Ø±Ø§Ø¬Ø¹Ø© ÙÙˆØ±ÙŠØ©)
- **Hard**: 1 ÙŠÙˆÙ… (ØµØ¹Ø¨)
- **Good**: ØªØµØ§Ø¹Ø¯ Ø·Ø¨ÙŠØ¹ÙŠ (1â†’3â†’8)
- **Excellent**: ØªØµØ§Ø¹Ø¯ Ø³Ø±ÙŠØ¹ (3â†’7â†’29)
- Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ¹Ø±Ù Ø¨Ø§Ù„Ø¶Ø¨Ø· Ù…Ø§Ø°Ø§ ÙŠØ­ØµÙ„

---

## ğŸ‰ ØªÙ… Ø§Ù„Ø­Ù„ Ø¨Ù†Ø¬Ø§Ø­!

Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø¢Ù† ÙŠØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ 100% Ø­Ø³Ø¨ Ù…Ø¹Ø§ÙŠÙŠØ± SM-2 Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØ©.

**Ø£ÙŠ Ø£Ø³Ø¦Ù„Ø©ØŸ**
Ø±Ø§Ø¬Ø¹ Ù…Ù„Ù `test-sm2-fixed.js` Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø´Ø§Ù…Ù„ØŒ Ø£Ùˆ Ù…Ù„Ù Ø§Ù„Ø´Ø±Ø­ Ø§Ù„Ø¹Ø±Ø¨ÙŠ Ø§Ù„ÙƒØ§Ù…Ù„ ÙÙŠ Ø§Ù„Ù€ Artifacts.
