# ๐ฏ ููุฎุต ุณุฑูุน: ุงูุชุนุฏููุงุช ุนูู ูุธุงู ุงููุฑุงุฌุนุฉ

## ๐ ูุง ุชู ุชุนุฏูููุ

ุชู ุชุนุฏูู ูุธุงู ุงูู flashcards ุจุญูุซ:
- โ **ุฃู ูุณุชุฎุฏู** ูุณุชุทูุน **ูุฑุงุฌุนุฉ** ุฃู ุฌููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ ุฌููุน ุงูุฌูู ุงููุณุชุญูุฉ ูููุฑุงุฌุนุฉ ุชุธูุฑ ูุฌููุน ุงููุณุชุฎุฏููู
- ๐ ุตูุงุญูุงุช **ุงูุฅุถุงูุฉ ูุงูุชุนุฏูู ูุงูุญุฐู** ูุง ุชุฒุงู ูููุงูู ููุท

---

## ๐ง ุงูุชุนุฏููุงุช ุงูุชูููุฉ

### 1. **Route ุงููุฑุงุฌุนุฉ** - `/api/sentences/:id/review`

```javascript
// ูุจู:
app.post('/api/sentences/:id/review', protect, checkSentenceOwnership(Sentence), ...)

// ุจุนุฏ:
app.post('/api/sentences/:id/review', protect, async ...)
```

**ุงูุชุบููุฑ:** ุฅุฒุงูุฉ `checkSentenceOwnership` - ุงูุขู ุฃู ูุณุชุฎุฏู ูุณุชุทูุน ุงููุฑุงุฌุนุฉ

---

### 2. **Route ุงูุฌูู ุงููุณุชุญูุฉ** - `/api/sentences/due`

```javascript
// ูุจู:
const dueSentences = await Sentence.find({
  userId: req.user._id,  // ุฌูู ุงููุณุชุฎุฏู ููุท
  nextReview: { $lte: now }
});

// ุจุนุฏ:
const dueSentences = await Sentence.find({
  nextReview: { $lte: now }  // ุฌููุน ุงูุฌูู ุงููุณุชุญูุฉ
});
```

**ุงูุชุบููุฑ:** ุฅุฒุงูุฉ ููุชุฑุฉ `userId` - ูุฌูุจ ุฌููุน ุงูุฌูู ุงููุณุชุญูุฉ

---

### 3. **ุฅุถุงูุฉ ุญูู `isOwner`**

ูู ุงุณุชุฌุงุจุฉ ุชุญุชูู ุนูู ุฌูู ุงูุขู ุชุชุถูู:
```javascript
{
  "_id": "...",
  "german": "Guten Tag",
  "arabic": "ุตุจุงุญ ุงูุฎูุฑ",
  "isOwner": true,  // true ุฅุฐุง ูุงูุช ุงูุฌููุฉ ูููุณุชุฎุฏู ุงูุญุงูู
  "stats": { ... }
}
```

---

## ๐ ุฌุฏูู ุงูุตูุงุญูุงุช

| ุงูุนูููุฉ | ูุจู ุงูุชุนุฏูู | ุจุนุฏ ุงูุชุนุฏูู |
|---------|-------------|-------------|
| ๐ **ูุฑุงุกุฉ ุงูุฌูู** | โ ููุฌููุน | โ ููุฌููุน |
| ๐ **ูุฑุงุฌุนุฉ ุงูุฌูู** | ๐ ูููุงูู ููุท | โ **ููุฌููุน** |
| โ **ุฅุถุงูุฉ ุฌููุฉ** | ๐ ุงููุณุชุฎุฏู ุงููุณุฌู | ๐ ูู ูุชุบูุฑ |
| โ๏ธ **ุชุนุฏูู ุฌููุฉ** | ๐ ูููุงูู ููุท | ๐ ูู ูุชุบูุฑ |
| ๐๏ธ **ุญุฐู ุฌููุฉ** | ๐ ูููุงูู ููุท | ๐ ูู ูุชุบูุฑ |

---

## ๐ ููููุฉ ุงูุชุทุจูู

### ุงูุทุฑููุฉ ุงูุณุฑูุนุฉ:

```bash
# 1. ุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ
cd backend
cp server.js server_backup.js

# 2. ุงุณุชุจุฏุงู ุงูููู
cp server_updated.js server.js

# 3. ุฅุนุงุฏุฉ ุชุดุบูู ุงูุณูุฑูุฑ
npm start
```

ุฃู ุงุณุชุฎุฏู `server_updated.js` ูุจุงุดุฑุฉ:
```bash
node server_updated.js
```

---

## โ ุงูุชุญูู ูู ุงููุฌุงุญ

ุจุนุฏ ุงูุชุดุบููุ ูุฌุจ ุฃู ุชุฑู:
```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ   ๐ Review Access: All Users          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

---

## ๐งช ุงุฎุชุจุงุฑ ุจุณูุท

### 1. ุชุณุฌูู ุฏุฎูู ูุณุชุฎุฏููู ูุฎุชูููู

**ุงููุณุชุฎุฏู A:**
```bash
POST /api/auth/login
{ "email": "userA@example.com", "password": "..." }
# ุงุญูุธ ุงูู token
```

**ุงููุณุชุฎุฏู B:**
```bash
POST /api/auth/login
{ "email": "userB@example.com", "password": "..." }
# ุงุญูุธ ุงูู token
```

### 2. ุงููุณุชุฎุฏู A ูุถูู ุฌููุฉ

```bash
POST /api/sentences
Authorization: Bearer <TOKEN_A>
{
  "german": "Guten Morgen",
  "arabic": "ุตุจุงุญ ุงูุฎูุฑ"
}
```

### 3. ุงููุณุชุฎุฏู B ูุฑุงุฌุน ุฌููุฉ ุงููุณุชุฎุฏู A โ

```bash
POST /api/sentences/[SENTENCE_ID]/review
Authorization: Bearer <TOKEN_B>
{
  "quality": 3
}

# ุงููุชูุฌุฉ: โ ุชู ุชุญุฏูุซ ุงูุจุทุงูุฉ ุจูุฌุงุญ
```

### 4. ุงููุณุชุฎุฏู B ูุญุงูู ุชุนุฏูู ุฌููุฉ ุงููุณุชุฎุฏู A โ

```bash
PUT /api/sentences/[SENTENCE_ID]
Authorization: Bearer <TOKEN_B>
{
  "german": "Modified"
}

# ุงููุชูุฌุฉ: โ ุบูุฑ ูุณููุญ! ููููู ููุท ุชุนุฏูู/ุญุฐู ุงูุฌูู ุงูุชู ุฃุถูุชูุง ุฃูุช
```

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **ุงูุฌูู ูุง ุชุฒุงู ูุฑุชุจุทุฉ ุจุฃุตุญุงุจูุง:**
   - ูู ุฌููุฉ ููุง `userId` ูุญุฏุฏ ูู ุฃุถุงููุง
   - ููุท ุญู ุงููุฑุงุฌุนุฉ ุฃุตุจุญ ูุดุชุฑูุงู

2. **ุฅุญุตุงุฆูุงุช ุงููุฑุงุฌุนุฉ:**
   - ูู ูุฑุงุฌุนุฉ ุชูุญุณุจ ุนูู ุงูุฌููุฉ ููุณูุง
   - `reviewCount`, `correctCount`, `wrongCount` ุชุชุญุฏุซ ููุฌููุฉ

3. **ูุธุงู SM-2:**
   - ูุนูู ุนูู ูุณุชูู ุงูุฌููุฉ (ููุณ ุนูู ูุณุชูู ุงููุณุชุฎุฏู)
   - ูู ูุฑุงุฌุนุฉ ูู ุฃู ูุณุชุฎุฏู ุชุคุซุฑ ุนูู ุฌุฏูู ุงููุฑุงุฌุนุฉ

---

## ๐ ุงููููุงุช ุงูููุนุฏููุฉ

```
backend/
โโโ server.js              โ ุงูููู ุงูุฃุตูู (ูุณุฎุฉ ุงุญุชูุงุทูุฉ)
โโโ server_updated.js      โ ุงูููู ุงูููุนุฏูู โ
โโโ SHARED_REVIEW_UPDATE.md  โ ุงูุชูุซูู ุงููุงูู
```

---

## ๐ก ูุตูุญุฉ ูููุงุฌูุฉ ุงูุฃูุงููุฉ

ุงุณุชุฎุฏู ุญูู `isOwner` ููุชุญูู ูู ุงูุฃุฒุฑุงุฑ:

```jsx
// ูุซุงู ูู React
function SentenceCard({ sentence }) {
  return (
    <div>
      <p>{sentence.german}</p>
      
      {/* ุฃุฒุฑุงุฑ ุงููุฑุงุฌุนุฉ - ููุฌููุน */}
      <button onClick={() => review(sentence._id, quality)}>
        ูุฑุงุฌุนุฉ
      </button>
      
      {/* ุฃุฒุฑุงุฑ ุงูุชุญูู - ูููุงูู ููุท */}
      {sentence.isOwner && (
        <>
          <button onClick={() => edit(sentence._id)}>ุชุนุฏูู</button>
          <button onClick={() => remove(sentence._id)}>ุญุฐู</button>
        </>
      )}
    </div>
  );
}
```

---

## โ ุฃุณุฆูุฉ ุดุงุฆุนุฉ

**ุณ: ูู ูููู ูููุณุชุฎุฏููู ุฑุคูุฉ ูู ุฃุถุงู ุงูุฌููุฉุ**
ุฌ: ูุนูุ ุฅุฐุง ุฃุฑุฏุช ููููู ุฅุถุงูุฉ `.populate('userId', 'name email')` ูู ุงูุงุณุชุนูุงูุงุช

**ุณ: ูู ุงูุฅุญุตุงุฆูุงุช ุงูุดุฎุตูุฉ ุชุชุฃุซุฑุ**
ุฌ: ูุงุ route `/api/stats` ูุง ูุฒุงู ูุญุณุจ ุฅุญุตุงุฆูุงุช ุงููุณุชุฎุฏู ุงูุญุงูู ููุท

**ุณ: ูู ูููู ุชุนุทูู ูุฐู ุงูููุฒุฉ ูุงุญูุงูุ**
ุฌ: ูุนูุ ููุท ุฃุนุฏ `checkSentenceOwnership` ูู route ุงููุฑุงุฌุนุฉ

---

ุชู ุงูุชุญุฏูุซ: **ููุงูุฑ 2026** ๐
